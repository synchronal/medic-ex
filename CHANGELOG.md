# Changelog

## Unreleased

## 2.0.2

- Fix local rebar check for versions where rebar3 install directory matches `1-18-otp-27`
  pattern.

## 2.0.1

- Make asdf current check backwards compatible with asdf 0.15 and older.

## 2.0.0

- **Breaking change:** Fix asdf check to support asdf 0.16+. When using asdf versions
  lower than 0.15, medic should be pinned to `~> 1.0`.

## 1.11.0

- `bin/dev/doctor` created by the `mix gen.medic` supports either `mise` or `asdf`.
- Add `Medic.Checks.ToolVersions` with same API as `Medic.Checks.Asdf`, but which
  checks for the existence of either [mise-en-place](https://mise.jdx.dev) or
  [asdf](https://asdf-vm.com).

## 1.10.0

- `Medic.Checks.Corepack` can be used without asdf.

## 1.9.3

- `Medic.Checks.Hex.local_rebar_installed?` determined rebar path based on `MIX_HOME`.

## 1.9.2

- Only load local checks with `.ex` or `.exs` file extensions.

## 1.9.1

- Fixed `Medic.Checks.Hosts`

## 1.9.0

- Added `Medic.Checks.Hosts`

## 1.8.8

- `Medic.Checks.Postgres.database_exists?` accepts a `:remedy` option.

## 1.8.7

** Reverted

## 1.8.6

- Checks may include atoms in arguments.

## 1.8.5

- Local checks are reloaded after pulling code during update.

## 1.8.4

- NPM uses `--include=dev` instead of `--dev`.
- Corepack check handles any error code.

## 1.8.3

- Fix `:build_mix` update step to split dev/test compilation, to handle deps that are only in one or the other.

## 1.8.2

- `:build_mix` compiles deps for test as well as dev. This makes sure that any libraries including formatters
  are compiled prior to those formatters being run from LSP (which is often run in MIX_ENV=test).
- Add libpq environment variable note to postgres check documentation.

## 1.8.1

- `mix.gen.medic` template for `doctor.exs` has fewer checks enabled.
- More Postgres checks accept a `:remedy` option.

## 1.8.0

- Postgres checks accept `:username` to pass to `psql`.
- Checks can handle arguments in the format, `binary, key: value`.

## 1.7.5

- Return an error when `Medic.Checks.Postgres.correct_version_running?` can't determine either
  the desired or the running version.

## 1.7.4

- Fix `Medic.Checks.Hex.local_rebar_installed?` check for Elixir 1.14.

## 1.7.3

- Bash `step` function exits with non-zero status code on failure.
- Bash `check` function exits with the check's exit code on failure.

## 1.7.2

- `mix gen.medic` installs `audit`, `format`, and `shipit` scripts.
- Fix the `step` bash to output multiline text on check failures.

## 1.7.1

- Update dependencies.
- Update source links.

## 1.7.0

- `Medic.Test.run` can take a list of options which are then appended to the `mix test` command.

## 1.6.1

- `Medic.Checks.Postgres.correct_data_directory?` and `Medic.Checks.Postgres.running?` now accept a `remedy` option
  in case the default value is not sufficient.

## 1.6.0

- NPM checks accept :prefix option to specify directory (defaulting to assets)

## 1.5.1

- Fix bug in NPM check's handling of `cd` option.

## 1.5.0

- NPM check accepts a `cd` option to change the working directory.

## 1.4.0

- Homebrew bundle check can specify a bundle file

## 1.3.0

- Hex checks can be run in subdirectories.

## 1.2.3

- Fix NPM.all_packages_installed? return value when `npm ls` returns non-zero exit.

## 1.2.2

- Only compile out-of-date deps when running `build_mix` in update.

## 1.2.1

- Fix `Medic.Checks.NPM.all_packages_installed?/0` check for unmet dependencies. Uses `npm ls` in place of `npm outdated`.

## 1.2.0

- Add `Medic.Checks.Git.uses_ssh?/1` to force SSH instead of HTTPS.

## 1.1.0

- Improved support for Linux.

## 1.0.0

- Tests fail if any compilation warnings are generated by the test scripts.

## 0.8.0

- Add `Medic.Checks.Hex.packages_compiled?/0`
- Add `:build_mix` Update command, which runs `packages_compiled?` to only run if
  deps require compilation.

## 0.7.0

- Add `Medic.Checks.Hex.local_rebar_installed?/0`

## 0.6.0

- Add `Medic.Checks.Chromedriver.chrome_installed?/0`.
- `Medic.Checks.Chromedriver.unquarantined?/0` suggests `brew install` rather than `brew bundle`.

## 0.5.1

- Add file existence checks to `Direnv` and `Homebrew`.

## 0.5.0

- [breaking change] Medic looks for files at:

  - `.medic/doctor.exs`
  - `.medic/update.exs`

  See docs at https://hexdocs.pm/medic/Medic.Update.html

## 0.4.0

- [breaking change] `Medic.Update` now requires `.medic.update.exs` config file.
  See docs at https://hexdocs.pm/medic/Medic.Update.html

## 0.3.0

- Skip checks by creating files at `.medic/skipped`

## 0.2.0

- Load local checks from `.medic/checks`

## 0.1.0

- Initial release
